import{r as f,F as $,J as O,K as M,o as L,I as z,q as B,L as Q,i as R,D as S,M as q,N as T,d as j,t as h,v as b,O as c,P as H,Q as K,_ as N,x as n,R as _,S as D,T as C,U as A,y as W,V as I,W as P,X as G,z as F}from"./nijivi4c.js";function J(g,a){let t,l,d;const i=f(!0),r=()=>{i.value=!0,d()};$(g,r,{flush:"sync"});const m=typeof a=="function"?a:a.get,u=typeof a=="function"?void 0:a.set,p=O((v,y)=>(l=v,d=y,{get(){return i.value&&(t=m(),i.value=!1),l(),t},set(x){u==null||u(x)}}));return Object.isExtensible(p)&&(p.trigger=r),p}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function X(g){const a=z(),t=J(()=>null,()=>a.proxy.$el);return M(t.trigger),L(t.trigger),t}function Y(g){const a=B().public.googleAdsense,t=Q(g,a),l=t.adClient??t.id,d=t.test?"on":null,i=Math.random(),r=X(),m=f(""),u=f(!1),p=R(()=>u.value?`page-${Math.random()}`:null),v=R(()=>{var e;return((e=r.value)==null?void 0:e.getAttribute("data-ad-status"))==="unfilled"}),y=V("path"),x=V("query"),U=R(()=>u.value?null:"");async function k(){u.value=!1,await T(),o()}async function o(){var e;if(u.value=!0,await T(),!((e=r.value)!=null&&e.innerHTML))try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(s){console.error(s)}}return $([y,x],(e,s)=>{const w=Z(e,s,t.includeQuery);r.value&&!r.value.isConnected||w&&k()}),S(()=>{!r.value||!r.value.isConnected||(u.value?r.value.innerHTML="":r.value.innerHTML=" ")}),t.hideUnfilled&&S(()=>v.value&&(m.value="hide-unfilled")),L(()=>o()),{adClass:m,dataAdClient:l,dataAdRegion:p,dataAdTest:d,dataAnalyticsDomainName:t.analyticsDomainName,dataAnalyticsUacct:t.analyticsUacct,isUnfilled:v,key:i,status:U,updateAd:k,showAd:o}}function V(g){const a=q();return R(()=>a[g])}function Z(g,a,t){const[l,d]=g,[i,r]=a;if(l!==i)return!0;if(!t)return;const m=Object.keys(d),u=Object.keys(r);return m.length!==u.length||m.some(p=>d[p]!==r[p])}const ee=["data-ad-client","data-ad-slot","data-ad-format","data-ad-region","data-ad-layout","data-ad-layout-key","data-page-url","data-analytics-uacct","data-analytics-domain-name","data-adtest","data-adsbygoogle-status","data-ad-full-width-responsive"],te=j({__name:"Adsbygoogle",props:{adClient:{default:void 0},adSlot:{default:null},adFormat:{},adLayout:{default:null},adLayoutKey:{default:null},adStyle:{default:()=>({display:"block"})},adFullWidthResponsive:{type:Boolean,default:!1},hideUnfilled:{type:Boolean,default:void 0},pageUrl:{default:null},analyticsUacct:{},analyticsDomainName:{},includeQuery:{type:Boolean}},setup(g,{expose:a}){const{adClient:t,analyticsDomainName:l,analyticsUacct:d,hideUnfilled:i,includeQuery:r}=g,{adClass:m,dataAdClient:u,dataAdRegion:p,dataAdTest:v,dataAnalyticsDomainName:y,dataAnalyticsUacct:x,isUnfilled:U,key:k,status:o,updateAd:e,showAd:s}=Y({adClient:t,analyticsDomainName:l,analyticsUacct:d,hideUnfilled:i,includeQuery:r});return a({isUnfilled:U,updateAd:e,showAd:s}),(w,E)=>(h(),b("ins",{ref:"ad",key:c(k),class:H(["adsbygoogle",c(m)]),style:K(w.adStyle),"data-ad-client":c(u),"data-ad-slot":w.adSlot,"data-ad-format":w.adFormat,"data-ad-region":c(p),"data-ad-layout":w.adLayout,"data-ad-layout-key":w.adLayoutKey,"data-page-url":w.pageUrl,"data-analytics-uacct":c(x),"data-analytics-domain-name":c(y),"data-adtest":c(v),"data-adsbygoogle-status":c(o),"data-ad-full-width-responsive":w.adFullWidthResponsive},null,14,ee))}}),ae=N(te,[["__scopeId","data-v-101bfb4a"]]),le={class:"relative w-full"},ne={class:"canvas-container relative mx-auto"},se={__name:"UploadImage",emits:["updateCanvas"],setup(g,{emit:a}){const t=f(null),l=f(null),d=f(1),i=f(600),r=a,m=p=>{const v=p.target.files[0];if(!v)return;const y=new FileReader;y.onload=async()=>{l.value=new Image,l.value.onload=async()=>{d.value=l.value.width/l.value.height,await T(),u()},l.value.src=y.result},y.readAsDataURL(v)},u=()=>{if(!t.value||!l.value)return;const p=t.value.getContext("2d"),v=t.value.parentNode;i.value=v.offsetWidth;const y=i.value/d.value;t.value.width=i.value,t.value.height=y,p.clearRect(0,0,t.value.width,t.value.height),p.drawImage(l.value,0,0,t.value.width,t.value.height),r("updateCanvas",t.value)};return L(()=>{window.addEventListener("resize",u),u()}),(p,v)=>(h(),b("div",le,[n("input",{type:"file",onChange:m,accept:"image/*",class:"mb-4 block mx-auto w-full max-w-md p-2 border rounded-md"},null,32),n("div",ne,[n("canvas",{ref_key:"canvas",ref:t,class:"w-full max-w-full border rounded-md"},null,512)])]))}},oe=N(se,[["__scopeId","data-v-55e54aa7"]]),de={class:"flex flex-col gap-4 bg-gray-100 p-6 rounded-lg shadow-md"},re={class:"mt-4"},ue={key:0,class:"mt-4"},ie={class:"text-sm text-gray-500"},ce={key:1,class:"mt-4"},me=["value"],pe={class:"text-sm text-gray-500"},ve={__name:"WatermarkControls",props:{canvas:{type:Object,required:!0}},setup(g){const a=g,t=f("image"),l=f(.5),d=f(null),i=f("Watermark"),r=f(30),m=f("#FFFFFF"),u=f("Arial"),p=f([]),v=f(null),y=async()=>{try{if("queryLocalFonts"in window){const o=await window.queryLocalFonts();p.value=o.filter(e=>e.fullName)}else console.warn("Local Font Access API is not supported in this browser.")}catch(o){console.error("Error fetching local fonts:",o)}};$([l,i,r,m,u,t],()=>{U()});const x=o=>{const e=o.target.files[0];if(!e)return;const s=new FileReader;s.onload=()=>{d.value=new Image,d.value.onload=()=>{U()},d.value.src=s.result},s.readAsDataURL(e)},U=()=>{if(!a.canvas)return;const o=a.canvas.getContext("2d");v.value?k(o):(v.value=new Image,v.value.src=a.canvas.toDataURL(),v.value.onload=()=>{k(o)})},k=o=>{if(o.clearRect(0,0,a.canvas.width,a.canvas.height),o.drawImage(v.value,0,0,a.canvas.width,a.canvas.height),t.value==="image"&&d.value){o.save(),o.globalAlpha=l.value;const e=a.canvas.width/3,s=d.value.height/d.value.width*e,w=(a.canvas.width-e)/2,E=(a.canvas.height-s)/2;o.drawImage(d.value,w,E,e,s),o.restore()}else t.value==="text"&&(o.save(),o.globalAlpha=l.value,o.font=`${r.value}px "${u.value}"`,o.fillStyle=m.value,o.textAlign="center",o.fillText(i.value,a.canvas.width/2,a.canvas.height-50),o.restore())};return L(()=>{y()}),(o,e)=>(h(),b("div",de,[n("div",re,[e[8]||(e[8]=n("label",{class:"block text-sm font-medium text-gray-700"},"Watermark Type:",-1)),_(n("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>C(t)?t.value=s:null),class:"mt-2 p-2 border rounded-md w-full"},e[7]||(e[7]=[n("option",{value:"image"},"Image",-1),n("option",{value:"text"},"Text",-1)]),512),[[D,c(t)]])]),c(t)==="image"?(h(),b("div",ue,[e[9]||(e[9]=n("label",{class:"block text-sm font-medium text-gray-700"},"Upload Watermark Image:",-1)),n("input",{type:"file",onChange:x,accept:"image/*",class:"mt-2 p-2 border rounded-md w-full"},null,32),e[10]||(e[10]=n("label",{class:"block mt-4 text-sm font-medium text-gray-700"},"Opacity:",-1)),_(n("input",{type:"range","onUpdate:modelValue":e[1]||(e[1]=s=>C(l)?l.value=s:null),min:"0",max:"1",step:"0.1",class:"mt-2 w-full"},null,512),[[A,c(l)]]),n("p",ie,"Opacity: "+W((c(l)*100).toFixed(0))+"%",1)])):I("",!0),c(t)==="text"?(h(),b("div",ce,[e[11]||(e[11]=n("label",{class:"block text-sm font-medium text-gray-700"},"Watermark Text:",-1)),_(n("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>C(i)?i.value=s:null),type:"text",placeholder:"Enter watermark text",class:"mt-2 p-2 border rounded-md w-full"},null,512),[[A,c(i)]]),e[12]||(e[12]=n("label",{class:"block mt-4 text-sm font-medium text-gray-700"},"Font Size:",-1)),_(n("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>C(r)?r.value=s:null),min:"10",max:"100",class:"mt-2 p-2 border rounded-md w-full"},null,512),[[A,c(r)]]),e[13]||(e[13]=n("label",{class:"block mt-4 text-sm font-medium text-gray-700"},"Font Color:",-1)),_(n("input",{type:"color","onUpdate:modelValue":e[4]||(e[4]=s=>C(m)?m.value=s:null),class:"mt-2 w-16 h-10 border rounded-md"},null,512),[[A,c(m)]]),e[14]||(e[14]=n("label",{class:"block mt-4 text-sm font-medium text-gray-700"},"Font:",-1)),_(n("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>C(u)?u.value=s:null),class:"mt-2 p-2 border rounded-md w-full"},[(h(!0),b(P,null,G(c(p),s=>(h(),b("option",{key:s.postscriptName,value:s.fullName},W(s.fullName),9,me))),128))],512),[[D,c(u)]]),e[15]||(e[15]=n("label",{class:"block mt-4 text-sm font-medium text-gray-700"},"Opacity:",-1)),_(n("input",{type:"range","onUpdate:modelValue":e[6]||(e[6]=s=>C(l)?l.value=s:null),min:"0",max:"1",step:"0.1",class:"mt-2 w-full"},null,512),[[A,c(l)]]),n("p",pe,"Opacity: "+W((c(l)*100).toFixed(0))+"%",1)])):I("",!0)]))}},fe={class:"flex justify-center mt-4"},ge={__name:"ExportButton",props:{canvas:{type:Object,required:!0}},setup(g){const a=g,t=()=>{const l=document.createElement("a");l.download="watermarked-image.png",l.href=a.canvas.toDataURL(),l.click()};return(l,d)=>(h(),b("div",fe,[n("button",{onClick:t,class:"p-2 bg-green-500 text-white"}," Export Image ")]))}},ye={class:"container mx-auto p-6 bg-white shadow-lg rounded-lg"},we={class:"ad-container my-4"},he={key:0,class:"mt-6"},be={key:1,class:"mt-6 text-center"},xe={__name:"index",setup(g){const a=f(null),t=l=>{a.value=l};return(l,d)=>{const i=ae,r=oe,m=ve,u=ge;return h(),b("div",ye,[d[0]||(d[0]=n("div",{class:"how-to bg-gray-100 p-6 mb-6 rounded-lg shadow-md"},[n("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"How to Use:"),n("ul",{class:"list-disc pl-6 text-gray-600"},[n("li",null,"Upload your base image first."),n("li",null,"Choose a watermark type: text or image."),n("li",null,"Customize your watermark's appearance."),n("li",null,"The canvas will scale to fit your screen."),n("li",null,"Export your final image using the export button.")])],-1)),n("div",we,[F(i,{style:{display:"block"},"data-ad-slot":"4848045761","data-ad-format":"auto","data-full-width-responsive":"true"})]),d[1]||(d[1]=n("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Watermark Creator",-1)),F(r,{onUpdateCanvas:t}),a.value?(h(),b("div",he,[F(m,{canvas:a.value},null,8,["canvas"])])):I("",!0),a.value?(h(),b("div",be,[F(u,{canvas:a.value},null,8,["canvas"])])):I("",!0)])}}},_e=N(xe,[["__scopeId","data-v-7c2a7855"]]);export{_e as default};
